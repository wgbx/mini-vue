# reactive.ts

该文件是 Vue.js 框架中用于创建响应式对象的部分。这个文件定义了如何将普通的 JavaScript 对象转换为响应式对象，使得 Vue 可以追踪这些对象的变化，并在变化时更新视图。

## 主要功能

- **reactive(target)**: 将一个普通对象转换为一个深层响应式对象。这意味着对象内部的所有嵌套属性也都是响应式的。
- **shallowReactive(target)**: 将一个普通对象转换为一个浅层响应式对象。只有对象的第一层属性是响应式的，更深层的对象则不是。
- **readonly(target)**: 将一个普通对象转换为一个只读响应式对象。任何尝试修改对象的操作都会被警告，并且不会成功。
- **shallowReadonly(target)**: 将一个普通对象转换为一个浅层只读响应式对象。对象的第一层属性是只读的，但更深层的对象可以被修改。

## 实现细节

- **createReactiveObj(target, isReadonly, baseHandlers)**: 这是一个工厂函数，用于创建响应式对象。它首先检查目标对象是否已经是一个响应式对象，如果是，则直接返回现有的代理。如果不是，则使用 `Proxy` 创建一个新的响应式代理，并将其存储在相应的 `WeakMap` 中。
  - `target`: 要转换的原始对象。
  - `isReadonly`: 布尔值，指示创建的对象是否应该是只读的。
  - `baseHandlers`: 对象，定义了如何拦截对目标对象的操作。

## 使用的数据结构

- **reactiveMap** 和 **readonlyMap**: 这两个 `WeakMap` 用于存储原始对象到其响应式代理的映射。这样可以避免重复创建响应式代理，并且当原始对象不再被引用时，允许垃圾回收。

## 导入的模块

- **baseHandlers.ts**: 从这个文件中导入了四种基本的处理器（handlers），分别对应深层和浅层的响应式和只读行为。

这份文档提供了对 `reactive.ts` 文件功能和实现的概览，有助于理解和使用 Vue 的响应式系统。
